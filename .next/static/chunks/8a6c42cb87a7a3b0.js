(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:n,iconNode:d,...c},u)=>(0,t.createElement)("svg",{ref:u,...r,width:s,height:s,stroke:e,strokeWidth:i?24*Number(l)/Number(s):l,className:a("lucide",o),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(n)?n:[n]])),i=(e,r)=>{let i=(0,t.forwardRef)(({className:i,...o},n)=>(0,t.createElement)(l,{ref:n,iconNode:r,className:a(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...o}));return i.displayName=s(e),i};e.s(["default",()=>i],75254)},58041,91774,e=>{"use strict";let t=(0,e.i(75254).default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["default",()=>t],91774),e.s(["Database",()=>t],58041)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},61086,e=>{"use strict";let t=(0,e.i(75254).default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);e.s(["Loader",()=>t],61086)},5017,20748,e=>{"use strict";var t=e.i(43476),s=e.i(61086);function a({variant:e="primary",size:a="md",loading:r=!1,icon:l,children:i,fullWidth:o=!1,disabled:n,...d}){return(0,t.jsx)("button",{disabled:n||r,className:`cursor-pointer font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-blue-600/30",success:"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-green-600/30",danger:"bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-red-600/30",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800",warning:"bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg hover:shadow-yellow-600/30",info:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg hover:shadow-purple-600/30"}[e]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[a]} ${o?"w-full":"w-auto"}`,...d,children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Loader,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{children:"Loading..."})]}):(0,t.jsxs)(t.Fragment,{children:[l,i]})})}e.s(["default",()=>a],5017);var r=e.i(75254);let l=(0,r.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),i=(0,r.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var o=e.i(71645);function n({label:e,error:s,showCount:a=!1,showPasswordToggle:r=!1,helperText:n,required:d=!1,type:c="text",maxLength:u,value:h="",...m}){let[x,g]=(0,o.useState)(!1);return(0,t.jsxs)("div",{className:"w-full",children:[e&&(0,t.jsxs)("label",{className:"block mb-2 text-sm font-semibold text-gray-700",children:[e," ",d&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:r?x?"text":"password":c,value:h,required:d,maxLength:u,"aria-label":e,"aria-required":d,"aria-invalid":!!s,className:`w-full px-4 py-3 ${r?"pr-12":""} border ${s?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-700 disabled:bg-gray-100 disabled:cursor-not-allowed`,...m}),r&&(0,t.jsx)("button",{type:"button",onClick:()=>g(!x),"aria-label":x?"Hide password":"Show password",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",children:x?(0,t.jsx)(l,{className:"w-5 h-5"}):(0,t.jsx)(i,{className:"w-5 h-5"})})]}),a&&u&&(0,t.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[String(h).length,"/",u," ","tel"===c||m.placeholder?.toLowerCase().includes("contact")?"digits":"characters"]}),n&&!s&&(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-600",children:n}),s&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600",role:"alert",children:s})]})}e.s(["default",()=>n],20748)},89954,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566);e.i(47167);var r=e.i(58041),l=e.i(75254);let i=(0,l.default)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var o=e.i(63209);let n=(0,l.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var d=e.i(5017),c=e.i(20748);function u({onLoginSuccess:e}){let[a,r]=(0,s.useState)({user_name:"",user_password:""}),[l,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1);async function p(t){t.preventDefault(),u(!0),m(null),g(!1);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await t.json();s.success&&s.user?e(s.user.id,s.user.user_name,s.user.roles_and_rights):(403===t.status&&g(!0),m(s.message||"Login failed"))}catch(e){m("Network error. Please try again.")}finally{u(!1)}}return(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsx)(c.default,{label:"Username",type:"text",value:a.user_name,onChange:e=>r({...a,user_name:e.target.value}),required:!0,placeholder:"Enter username",autoComplete:"username",disabled:l}),(0,t.jsx)(c.default,{label:"Password",type:"password",value:a.user_password,onChange:e=>r({...a,user_password:e.target.value}),required:!0,placeholder:"Enter password",showPasswordToggle:!0,autoComplete:"current-password",disabled:l}),h&&(0,t.jsxs)("div",{className:`p-3 border rounded-lg text-sm flex items-start gap-3 ${x?"bg-orange-50 border-orange-200 text-orange-800":"bg-red-50 border-red-200 text-red-800"}`,children:[x?(0,t.jsx)(n,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}):(0,t.jsx)(o.AlertCircle,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:x?"Account Disabled":"Login Failed"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:h})]})]}),(0,t.jsx)(d.default,{type:"submit",variant:"primary",loading:l,fullWidth:!0,icon:l?void 0:(0,t.jsx)(i,{className:"w-5 h-5"}),children:l?"Signing in...":"Sign In"})]})}function h({onLoginSuccess:e}){return(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,t.jsx)(r.Database,{className:"w-8 h-8 text-blue-600"})})}),(0,t.jsxs)("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-2",children:["Explore EUmatrix political data"," Login"]}),(0,t.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"Sign in to access the database explorer"}),(0,t.jsx)(u,{onLoginSuccess:e})]})})}var m=e.i(61086);function x(){let e=(0,a.useRouter)(),[r,l]=(0,s.useState)(!0);async function i(){try{let e=await fetch("/api/auth/seed",{method:"POST"});e.ok||console.error("Seed check failed:",e.statusText),await e.json()}catch(e){console.error("Seed check failed:",e)}finally{l(!1)}}return((0,s.useEffect)(()=>{sessionStorage.getItem("userId")?e.push("/"):i()},[]),r)?(0,t.jsx)("div",{className:"min-h-screen from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(m.Loader,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Initializing..."})]})}):(0,t.jsx)("div",{className:"min-h-screen from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,t.jsx)(h,{onLoginSuccess:function(t,s,a){sessionStorage.setItem("userId",t),sessionStorage.setItem("userName",s),sessionStorage.setItem("userRole",a),e.push("/")}})})}e.s(["default",()=>x],89954)}]);