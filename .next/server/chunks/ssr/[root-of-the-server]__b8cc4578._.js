module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(97877).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(97877).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(97877).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(97877).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},97877,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(97877).vendored["react-ssr"].ReactJsxRuntime},83694,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(20494),f=a.i(70106);let g=(0,f.default)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var h=a.i(92e3);let i=(0,f.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var j=a.i(15879),k=a.i(89266);function l({onLoginSuccess:a}){let[d,e]=(0,c.useState)({user_name:"",user_password:""}),[f,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1);async function q(b){b.preventDefault(),l(!0),n(null),p(!1);try{let b=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),c=await b.json();c.success&&c.user?a(c.user.id,c.user.user_name,c.user.roles_and_rights):(403===b.status&&p(!0),n(c.message||"Login failed"))}catch(a){n("Network error. Please try again.")}finally{l(!1)}}return(0,b.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,b.jsx)(k.default,{label:"Username",type:"text",value:d.user_name,onChange:a=>e({...d,user_name:a.target.value}),required:!0,placeholder:"Enter username",autoComplete:"username",disabled:f}),(0,b.jsx)(k.default,{label:"Password",type:"password",value:d.user_password,onChange:a=>e({...d,user_password:a.target.value}),required:!0,placeholder:"Enter password",showPasswordToggle:!0,autoComplete:"current-password",disabled:f}),m&&(0,b.jsxs)("div",{className:`p-3 border rounded-lg text-sm flex items-start gap-3 ${o?"bg-orange-50 border-orange-200 text-orange-800":"bg-red-50 border-red-200 text-red-800"}`,children:[o?(0,b.jsx)(i,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}):(0,b.jsx)(h.AlertCircle,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:o?"Account Disabled":"Login Failed"}),(0,b.jsx)("p",{className:"text-xs mt-1",children:m})]})]}),(0,b.jsx)(j.default,{type:"submit",variant:"primary",loading:f,fullWidth:!0,icon:f?void 0:(0,b.jsx)(g,{className:"w-5 h-5"}),children:f?"Signing in...":"Sign In"})]})}function m({onLoginSuccess:a}){return(0,b.jsx)("div",{className:"w-full max-w-md",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,b.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,b.jsx)(e.Database,{className:"w-8 h-8 text-blue-600"})})}),(0,b.jsxs)("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-2",children:["Explore EUmatrix political data"," Login"]}),(0,b.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"Sign in to access the database explorer"}),(0,b.jsx)(l,{onLoginSuccess:a})]})})}var n=a.i(28193);function o(){let a=(0,d.useRouter)(),[e,f]=(0,c.useState)(!0);async function g(){try{let a=await fetch("/api/auth/seed",{method:"POST"});a.ok||console.error("Seed check failed:",a.statusText),await a.json()}catch(a){console.error("Seed check failed:",a)}finally{f(!1)}}return((0,c.useEffect)(()=>{sessionStorage.getItem("userId")?a.push("/"):g()},[]),e)?(0,b.jsx)("div",{className:"min-h-screen from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(n.Loader,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Initializing..."})]})}):(0,b.jsx)("div",{className:"min-h-screen from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,b.jsx)(m,{onLoginSuccess:function(b,c,d){sessionStorage.setItem("userId",b),sessionStorage.setItem("userName",c),sessionStorage.setItem("userRole",d),a.push("/")}})})}a.s(["default",()=>o],83694)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b8cc4578._.js.map